FROM node:lts
EXPOSE 3000
WORKDIR /app
COPY --chmod=777 package* gsap-bonus.tgz ./
RUN npm ci
ARG NEXT_PUBLIC_COINMARKETCAP
ARG NEXT_PUBLIC_REACT_APP_BLOCK_EXPLORE_URL
ARG NEXT_PUBLIC_REACT_APP_CHAIN_ID_HEX
ARG NEXT_PUBLIC_REACT_APP_CHAIN_ID
ARG NEXT_PUBLIC_REACT_APP_REST
ARG RIO_ALGORAND_HOLDERS_URL
ARG RIO_STELLAR_HOLDERS_URL
ARG NEXT_PUBLIC_REACT_APP_RPC_URL
ARG NEXT_PUBLIC_REACT_APP_RPC
ARG NEXT_PUBLIC_REST_API_URL
ARG RIO_ETHEREUM_DATA_URL
ARG NEXT_PUBLIC_RIO_STELLAR_HOLDERS_URL
ARG RIO_NATIVE_SUPPLY_URL
ARG RIO_VOLUME_PRICE_DATA_URL
ARG CRYPTO_COMPARE_API_KEY
ARG NEXT_PUBLIC_RIO_NATIVE_SUPPLY_CAP
ENV NEXT_PUBLIC_COINMARKETCAP=$NEXT_PUBLIC_COINMARKETCAP
ENV NEXT_PUBLIC_REACT_APP_BLOCK_EXPLORE_URL=$NEXT_PUBLIC_REACT_APP_BLOCK_EXPLORE_URL
ENV NEXT_PUBLIC_REACT_APP_CHAIN_ID_HEX=$NEXT_PUBLIC_REACT_APP_CHAIN_ID_HEX
ENV NEXT_PUBLIC_REACT_APP_CHAIN_ID=$NEXT_PUBLIC_REACT_APP_CHAIN_ID
ENV NEXT_PUBLIC_REACT_APP_REST=$NEXT_PUBLIC_REACT_APP_REST
ENV RIO_ALGORAND_HOLDERS_URL=$RIO_ALGORAND_HOLDERS_URL
ENV RIO_STELLAR_HOLDERS_URL=$RIO_STELLAR_HOLDERS_URL
ENV NEXT_PUBLIC_REACT_APP_RPC_URL=$NEXT_PUBLIC_REACT_APP_RPC_URL
ENV NEXT_PUBLIC_REACT_APP_RPC=$NEXT_PUBLIC_REACT_APP_RPC
ENV NEXT_PUBLIC_REST_API_URL=$NEXT_PUBLIC_REST_API_URL
ENV RIO_ETHEREUM_DATA_URL=$RIO_ETHEREUM_DATA_URL
ENV NEXT_PUBLIC_RIO_STELLAR_HOLDERS_URL=$NEXT_PUBLIC_RIO_STELLAR_HOLDERS_URL
ENV RIO_NATIVE_SUPPLY_URL=$RIO_NATIVE_SUPPLY_URL
ENV NEXT_PUBLIC_RIO_NATIVE_SUPPLY_CAP=$NEXT_PUBLIC_RIO_NATIVE_SUPPLY_CAP
ENV RIO_VOLUME_PRICE_DATA_URL=$RIO_VOLUME_PRICE_DATA_URL
ENV CRYPTO_COMPARE_API_KEY=$CRYPTO_COMPARE_API_KEY
COPY --chmod=777 . .
RUN npm run build
RUN chown -R 1000:1000 /app
USER 1000
CMD [ "npm", "run", "start" ]
